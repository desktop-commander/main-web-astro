import{j as e}from"./createLucideIcon.BEuh3_N-.js";import{u as E,P as U,T as B,a as F,E as L,b as M,d as R,e as z,g as A}from"./basePath.BwVuwYwI.js";import{B as m}from"./button.CZfl4kVy.js";import{B as l}from"./badge.BjoO2Txg.js";import{S as I}from"./separator.Dzoct6zl.js";import{r as o}from"./index.CWXBSLiN.js";import{d as $,A as O,a as C,R as W,T as H,b as V,S as q,F as G,c as J,B as K,I as f,U as Q,P as X,e as Y,f as Z,g as ee,h as te,i as se}from"./UsePromptWizard.DjvvZLND.js";import{S as re,D as ae,C as oe,F as ie}from"./search.BcZOoH9D.js";import{C as ne}from"./clock.B5x9a4UP.js";import{S as le}from"./shield.ei9_6VNQ.js";import{F as ce}from"./file-text.DfbTpQul.js";import{C as u}from"./code.D-o_-DDX.js";import{R as de}from"./rocket.CVOn75Fn.js";import"./index.CF_Stp3P.js";import"./index.DjLdJVXC.js";import"./index.C7NEOyAM.js";import"./index.CRey4BLF.js";import"./index.CxCIKqlj.js";import"./index.DbBN8UT9.js";import"./index.Cdu5vV5E.js";import"./module.CwMc7FNh.js";import"./index.Cd7bSX-e.js";import"./index.B-LzdZND.js";import"./index.CtY1ZrPr.js";import"./dialog.Chm4KGQY.js";import"./index.DT6SXZWh.js";import"./circle.B5TsSG8m.js";import"./external-link.D7x_p1k-.js";import"./terminal.9vORBRHT.js";const me={FolderSearch:G,FolderOrganize:ie,Code:u,BarChart3:oe,Settings:q,FileText:ce,Archive:V,Shield:le,Database:ae,TestTube:H,Clock:ne,RefreshCw:W,ArrowRightLeft:C,Activity:O,Search:re},pe=t=>{if(!t)return!1;const c=new Date(t),i=Math.abs(new Date().getTime()-c.getTime());return Math.ceil(i/(1e3*60*60*24))<=14},We=({useCase:t})=>{const[c,j]=o.useState(!1),[i,n]=o.useState(!1),[b,p]=o.useState(!1),[w,x]=o.useState(!1),{toast:h}=$(),[xe,g]=o.useState(0),d=E();o.useEffect(()=>{if(!t)return;const s=`useCase_uses_${t.id}`,r=localStorage.getItem(s),a=r?Number(r):0;g(Number.isFinite(a)?a:0),d.capture("prompt_page_viewed",{prompt_id:t.id,prompt_title:t.title,prompt_slug:t.slug,prompt_categories:t.categories,prompt_session_type:t.sessionType,source_page:"direct_url",url_type:"seo_friendly"})},[t?.id,d]);const y=()=>{if(!t)return;const s=`useCase_uses_${t.id}`;g(r=>{const a=r+1;return localStorage.setItem(s,String(a)),a})};if(!t)return null;const v=me[t.icon]||u,N=pe(t.dateAdded),k=()=>{p(!0),y()},_=()=>{window.location.href="/library"},S=s=>{switch(s){case"Instant output":return"session-instant-output";case"Step-by-step flow":return"session-step-by-step-flow";default:return"session-instant-output"}},T=(s="share_button")=>{const r=new URL(A(`/library/prompts/${t.slug}`),window.location.origin);return r.searchParams.set("utm_source","desktop_commander"),r.searchParams.set("utm_medium",s),r.searchParams.set("utm_campaign","prompt_sharing"),r.searchParams.set("utm_content",t.slug||""),r.searchParams.set("shared_at",Date.now().toString()),r.toString()},P=async()=>{const s=typeof navigator<"u"&&(/(Mobi|Android|iPhone|iPad|iPod)/i.test(navigator.userAgent)||typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches),r=s&&navigator.share?"native_share":"clipboard_copy",a=T(r),D=`Prompt: ${t.title}`;d.capture("share_button_clicked",{prompt_id:t.id,prompt_title:t.title,share_method:r,source_page:"prompt_detail_page"});try{if(s&&navigator.share){await navigator.share({title:D,text:"Check out this Desktop Commander prompt",url:a});return}await navigator.clipboard.writeText(a),x(!0),setTimeout(()=>x(!1),1500),h({title:"Link copied",description:"Share it with your team.",action:e.jsx(se,{altText:"Open link",onClick:()=>window.open(a,"_blank","noopener,noreferrer"),children:"Open"})})}catch{h({title:"Share failed",description:"Could not share or copy the link.",variant:"destructive"})}};return e.jsx(U,{children:e.jsxs(B,{children:[e.jsx("div",{className:"min-h-screen bg-background mt-20",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs(m,{variant:"ghost",onClick:_,className:"mb-6 -ml-2 text-muted-foreground hover:text-foreground",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Library"]}),e.jsxs("div",{className:"flex items-start gap-4 mb-8",children:[e.jsx("div",{className:"p-3 bg-dc-surface-elevated rounded-lg flex-shrink-0",children:e.jsx(v,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-3 break-words flex items-start gap-2",children:[t.title,N&&e.jsxs(l,{variant:"outline",className:"text-xs bg-primary/10 text-primary border-primary/20 flex-shrink-0",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"New"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.verified&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs rounded-full border border-primary/20 bg-primary/10 text-primary px-2 py-0.5",children:[e.jsx(K,{className:"h-3 w-3"}),"Verified by DC team"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs(l,{className:`difficulty-badge ${S(t.sessionType)} text-xs flex items-center gap-1 cursor-pointer hover:opacity-90 transition-opacity`,onClick:()=>n(!i),children:[e.jsx("span",{children:t.sessionType}),e.jsx(f,{className:"h-3 w-3"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 animate-in fade-in-0 zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:F[t.sessionType]})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),n(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 rotate-45"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map((s,r)=>e.jsx(l,{variant:"outline",className:"text-xs",children:s},r))}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:t.author})]})]})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[e.jsx(L,{count:t.votes+(c?1:0)}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx("button",{type:"button","aria-label":`Exact uses: ${t.votes} (all-time)`,className:"inline-flex items-center justify-center text-muted-foreground hover:text-foreground",children:e.jsx(f,{className:"h-4 w-4"})})}),e.jsxs(Z,{align:"end",side:"bottom",children:["Exact uses: ",t.votes," (all-time)"]})]})]})]}),e.jsxs("div",{className:"space-y-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-base text-muted-foreground leading-relaxed break-words",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Target Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.targetRoles.map(s=>e.jsx(l,{variant:"secondary",className:"role-tag text-xs",children:s},s))})]}),e.jsx(I,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Prompt"}),e.jsx("div",{className:"p-6 bg-dc-surface-elevated rounded-lg border max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-foreground whitespace-pre-wrap font-mono leading-relaxed",children:t.prompt})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsxs(M,{children:[e.jsx(R,{asChild:!0,children:e.jsxs(m,{variant:"outline",onClick:P,"aria-label":"Share this prompt",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:w?"Copied":"Share"})]})}),e.jsx(z,{children:"Copy link to share"})]}),e.jsxs(m,{className:"dc-button-primary flex items-center gap-2",onClick:k,children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"Use Prompt"})]})]})]})}),e.jsx(te,{isOpen:b,onClose:()=>p(!1),prompt:t.prompt,promptTitle:t.title})]})})};export{We as default};
