import{j as e}from"./createLucideIcon.lbH8MOOS.js";import{u as U,P as B,T as F,s as L,E as M,a as R,b as z,c as A}from"./EngagementMeter.rNO8DdD5.js";import{B as m}from"./button.DH7F1eIX.js";import{B as l}from"./badge.D6IL2F4I.js";import{C as I,S as $}from"./separator.7feMC1v4.js";import{g as f}from"./basePath.Com_9Vmi.js";import{r as o}from"./index.CWXBSLiN.js";import{u as O,A as C,a as W,R as H,T as V,b as q,S as G,C as j,F as J,c as K,B as Q,I as u,U as X,P as Y,d as Z,e as ee,f as te,g as se,h as re,i as ae}from"./UsePromptWizard.ya-FNKb3.js";import{S as oe,D as ie,C as ne,F as le}from"./search.BCfT3Ctp.js";import{S as ce}from"./shield.DHKQn7mI.js";import{F as de}from"./file-text.CQ5uA7qB.js";import"./module.CwMc7FNh.js";import"./index.nZrWgv9X.js";import"./index.HP6DMYez.js";import"./index.C4392Xvt.js";import"./index.CxCIKqlj.js";import"./index.DbBN8UT9.js";import"./index.SIxPWe7A.js";import"./index.2XLg-ATo.js";import"./index.D7vDsi4e.js";import"./dialog.D7UtVjuh.js";import"./index.CkHrME_e.js";import"./circle.bN4dfeBf.js";import"./external-link.CJ9G_Kbx.js";import"./terminal.Fo49g-k8.js";import"./check.1Ohzk8kF.js";const me={FolderSearch:J,FolderOrganize:le,Code:j,BarChart3:ne,Settings:G,FileText:de,Archive:q,Shield:ce,Database:ie,TestTube:V,Clock:I,RefreshCw:H,ArrowRightLeft:W,Activity:C,Search:oe},pe=t=>{if(!t)return!1;const c=new Date(t),i=Math.abs(new Date().getTime()-c.getTime());return Math.ceil(i/(1e3*60*60*24))<=14},$e=({useCase:t})=>{const[c,b]=o.useState(!1),[i,n]=o.useState(!1),[w,p]=o.useState(!1),[y,x]=o.useState(!1),{toast:h}=O(),[xe,g]=o.useState(0),d=U();o.useEffect(()=>{if(!t)return;const s=`useCase_uses_${t.id}`,r=localStorage.getItem(s),a=r?Number(r):0;g(Number.isFinite(a)?a:0),d.capture("prompt_page_viewed",{prompt_id:t.id,prompt_title:t.title,prompt_slug:t.slug,prompt_categories:t.categories,prompt_session_type:t.sessionType,source_page:"direct_url",url_type:"seo_friendly"})},[t?.id,d]);const v=()=>{if(!t)return;const s=`useCase_uses_${t.id}`;g(r=>{const a=r+1;return localStorage.setItem(s,String(a)),a})};if(!t)return null;const N=me[t.icon]||j,k=pe(t.dateAdded),_=()=>{p(!0),v()},S=()=>{window.location.href=f("/library/prompts")},T=s=>{switch(s){case"Instant output":return"session-instant-output";case"Step-by-step flow":return"session-step-by-step-flow";default:return"session-instant-output"}},P=(s="share_button")=>{const r=new URL(f(`/library/prompts/${t.slug}`),window.location.origin);return r.searchParams.set("utm_source","desktop_commander"),r.searchParams.set("utm_medium",s),r.searchParams.set("utm_campaign","prompt_sharing"),r.searchParams.set("utm_content",t.slug||""),r.searchParams.set("shared_at",Date.now().toString()),r.toString()},D=async()=>{const s=typeof navigator<"u"&&(/(Mobi|Android|iPhone|iPad|iPod)/i.test(navigator.userAgent)||typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches),r=s&&navigator.share?"native_share":"clipboard_copy",a=P(r),E=`Prompt: ${t.title}`;d.capture("share_button_clicked",{prompt_id:t.id,prompt_title:t.title,share_method:r,source_page:"prompt_detail_page"});try{if(s&&navigator.share){await navigator.share({title:E,text:"Check out this Desktop Commander prompt",url:a});return}await navigator.clipboard.writeText(a),x(!0),setTimeout(()=>x(!1),1500),h({title:"Link copied",description:"Share it with your team.",action:e.jsx(ae,{altText:"Open link",onClick:()=>window.open(a,"_blank","noopener,noreferrer"),children:"Open"})})}catch{h({title:"Share failed",description:"Could not share or copy the link.",variant:"destructive"})}};return e.jsx(B,{children:e.jsxs(F,{children:[e.jsx("div",{className:"min-h-screen bg-background mt-20",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs(m,{variant:"ghost",onClick:S,className:"mb-6 -ml-2 text-muted-foreground hover:text-foreground",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Library"]}),e.jsxs("div",{className:"flex items-start gap-4 mb-8",children:[e.jsx("div",{className:"p-3 bg-dc-surface-elevated rounded-lg flex-shrink-0",children:e.jsx(N,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-3 break-words flex items-start gap-2",children:[t.title,k&&e.jsxs(l,{variant:"outline",className:"text-xs bg-primary/10 text-primary border-primary/20 flex-shrink-0",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"New"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.verified&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs rounded-full border border-primary/20 bg-primary/10 text-primary px-2 py-0.5",children:[e.jsx(Q,{className:"h-3 w-3"}),"Verified by DC team"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs(l,{className:`difficulty-badge ${T(t.sessionType)} text-xs flex items-center gap-1 cursor-pointer hover:opacity-90 transition-opacity`,onClick:()=>n(!i),children:[e.jsx("span",{children:t.sessionType}),e.jsx(u,{className:"h-3 w-3"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 animate-in fade-in-0 zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:L[t.sessionType]})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),n(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 rotate-45"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map((s,r)=>e.jsx(l,{variant:"outline",className:"text-xs",children:s},r))}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:t.author})]})]})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[e.jsx(M,{count:t.votes+(c?1:0)}),e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx("button",{type:"button","aria-label":`Exact uses: ${t.votes} (all-time)`,className:"inline-flex items-center justify-center text-muted-foreground hover:text-foreground",children:e.jsx(u,{className:"h-4 w-4"})})}),e.jsxs(ee,{align:"end",side:"bottom",children:["Exact uses: ",t.votes," (all-time)"]})]})]})]}),e.jsxs("div",{className:"space-y-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-base text-muted-foreground leading-relaxed break-words",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Target Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.targetRoles.map(s=>e.jsx(l,{variant:"secondary",className:"role-tag text-xs",children:s},s))})]}),e.jsx($,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Prompt"}),e.jsx("div",{className:"p-6 bg-dc-surface-elevated rounded-lg border max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-foreground whitespace-pre-wrap font-mono leading-relaxed",children:t.prompt})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsxs(R,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(m,{variant:"outline",onClick:D,"aria-label":"Share this prompt",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:y?"Copied":"Share"})]})}),e.jsx(A,{children:"Copy link to share"})]}),e.jsxs(m,{className:"dc-button-primary flex items-center gap-2",onClick:_,children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:"Use Prompt"})]})]})]})}),e.jsx(re,{isOpen:w,onClose:()=>p(!1),prompt:t.prompt,promptTitle:t.title})]})})};export{$e as default};
