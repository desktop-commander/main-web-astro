import{j as e}from"./createLucideIcon.DNFPpIR1.js";import{a as U,P as B,T as F,b as L,E as M,d as R,e as z,f as A,g as f}from"./basePath.C5kBFOjC.js";import{B as m}from"./button.BGiW6LDH.js";import{B as l}from"./badge.CMTy_HtT.js";import{S as I}from"./separator.DY9jcvo-.js";import{r as o}from"./index.7sDP9NVU.js";import{d as $,A as O,a as C,R as W,T as H,b as V,S as q,F as G,c as J,B as K,I as u,U as Q,P as X,e as Y,f as Z,g as ee,h as te,i as se}from"./UsePromptWizard.CVvW_X4R.js";import{S as re,D as ae,C as oe,F as ie}from"./search.TU2VV_m5.js";import{C as ne}from"./clock.B-n3Sk3i.js";import{S as le}from"./shield.OvQA_fCw.js";import{F as ce}from"./file-text.uc6bebZv.js";import{C as j}from"./code.gJW-vtW1.js";import{R as de}from"./rocket.y5h8Fl1D.js";import"./module.CwMc7FNh.js";import"./index.BNPUgRsH.js";import"./index.DnWcoqiW.js";import"./index.DZ4dN7hL.js";import"./index.CKalKeLr.js";import"./index.BK3IWU3c.js";import"./index.CM3JlARO.js";import"./index.CtxJxf1y.js";import"./index.BozIneJ-.js";import"./index.B2Einal-.js";import"./index.C_b4510c.js";import"./dialog.BOetdtil.js";import"./index.BSYwaLn0.js";import"./circle.DsBJU568.js";import"./external-link.BtPi_8X2.js";import"./terminal.CLW9bhP8.js";const me={FolderSearch:G,FolderOrganize:ie,Code:j,BarChart3:oe,Settings:q,FileText:ce,Archive:V,Shield:le,Database:ae,TestTube:H,Clock:ne,RefreshCw:W,ArrowRightLeft:C,Activity:O,Search:re},pe=t=>{if(!t)return!1;const c=new Date(t),i=Math.abs(new Date().getTime()-c.getTime());return Math.ceil(i/(1e3*60*60*24))<=14},We=({useCase:t})=>{const[c,b]=o.useState(!1),[i,n]=o.useState(!1),[w,p]=o.useState(!1),[y,x]=o.useState(!1),{toast:h}=$(),[xe,g]=o.useState(0),d=U();o.useEffect(()=>{if(!t)return;const s=`useCase_uses_${t.id}`,r=localStorage.getItem(s),a=r?Number(r):0;g(Number.isFinite(a)?a:0),d.capture("prompt_page_viewed",{prompt_id:t.id,prompt_title:t.title,prompt_slug:t.slug,prompt_categories:t.categories,prompt_session_type:t.sessionType,source_page:"direct_url",url_type:"seo_friendly"})},[t?.id,d]);const v=()=>{if(!t)return;const s=`useCase_uses_${t.id}`;g(r=>{const a=r+1;return localStorage.setItem(s,String(a)),a})};if(!t)return null;const N=me[t.icon]||j,k=pe(t.dateAdded),_=()=>{p(!0),v()},S=()=>{window.location.href=f("/library/prompts")},T=s=>{switch(s){case"Instant output":return"session-instant-output";case"Step-by-step flow":return"session-step-by-step-flow";default:return"session-instant-output"}},P=(s="share_button")=>{const r=new URL(f(`/library/prompts/${t.slug}`),window.location.origin);return r.searchParams.set("utm_source","desktop_commander"),r.searchParams.set("utm_medium",s),r.searchParams.set("utm_campaign","prompt_sharing"),r.searchParams.set("utm_content",t.slug||""),r.searchParams.set("shared_at",Date.now().toString()),r.toString()},D=async()=>{const s=typeof navigator<"u"&&(/(Mobi|Android|iPhone|iPad|iPod)/i.test(navigator.userAgent)||typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches),r=s&&navigator.share?"native_share":"clipboard_copy",a=P(r),E=`Prompt: ${t.title}`;d.capture("share_button_clicked",{prompt_id:t.id,prompt_title:t.title,share_method:r,source_page:"prompt_detail_page"});try{if(s&&navigator.share){await navigator.share({title:E,text:"Check out this Desktop Commander prompt",url:a});return}await navigator.clipboard.writeText(a),x(!0),setTimeout(()=>x(!1),1500),h({title:"Link copied",description:"Share it with your team.",action:e.jsx(se,{altText:"Open link",onClick:()=>window.open(a,"_blank","noopener,noreferrer"),children:"Open"})})}catch{h({title:"Share failed",description:"Could not share or copy the link.",variant:"destructive"})}};return e.jsx(B,{children:e.jsxs(F,{children:[e.jsx("div",{className:"min-h-screen bg-background mt-20",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs(m,{variant:"ghost",onClick:S,className:"mb-6 -ml-2 text-muted-foreground hover:text-foreground",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Library"]}),e.jsxs("div",{className:"flex items-start gap-4 mb-8",children:[e.jsx("div",{className:"p-3 bg-dc-surface-elevated rounded-lg flex-shrink-0",children:e.jsx(N,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-3 break-words flex items-start gap-2",children:[t.title,k&&e.jsxs(l,{variant:"outline",className:"text-xs bg-primary/10 text-primary border-primary/20 flex-shrink-0",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"New"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.verified&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs rounded-full border border-primary/20 bg-primary/10 text-primary px-2 py-0.5",children:[e.jsx(K,{className:"h-3 w-3"}),"Verified by DC team"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs(l,{className:`difficulty-badge ${T(t.sessionType)} text-xs flex items-center gap-1 cursor-pointer hover:opacity-90 transition-opacity`,onClick:()=>n(!i),children:[e.jsx("span",{children:t.sessionType}),e.jsx(u,{className:"h-3 w-3"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 animate-in fade-in-0 zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:L[t.sessionType]})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),n(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 rotate-45"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map((s,r)=>e.jsx(l,{variant:"outline",className:"text-xs",children:s},r))}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:t.author})]})]})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[e.jsx(M,{count:t.votes+(c?1:0)}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx("button",{type:"button","aria-label":`Exact uses: ${t.votes} (all-time)`,className:"inline-flex items-center justify-center text-muted-foreground hover:text-foreground",children:e.jsx(u,{className:"h-4 w-4"})})}),e.jsxs(Z,{align:"end",side:"bottom",children:["Exact uses: ",t.votes," (all-time)"]})]})]})]}),e.jsxs("div",{className:"space-y-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-base text-muted-foreground leading-relaxed break-words",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Target Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.targetRoles.map(s=>e.jsx(l,{variant:"secondary",className:"role-tag text-xs",children:s},s))})]}),e.jsx(I,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Prompt"}),e.jsx("div",{className:"p-6 bg-dc-surface-elevated rounded-lg border max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-foreground whitespace-pre-wrap font-mono leading-relaxed",children:t.prompt})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsxs(R,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(m,{variant:"outline",onClick:D,"aria-label":"Share this prompt",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:y?"Copied":"Share"})]})}),e.jsx(A,{children:"Copy link to share"})]}),e.jsxs(m,{className:"dc-button-primary flex items-center gap-2",onClick:_,children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"Use Prompt"})]})]})]})}),e.jsx(te,{isOpen:w,onClose:()=>p(!1),prompt:t.prompt,promptTitle:t.title})]})})};export{We as default};
